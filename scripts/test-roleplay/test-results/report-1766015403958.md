
# Roleplay Test Execution Report

**Generated:** 2025-12-17T23:50:03.958Z
**Total Duration:** 5.13s

## Summary

- **Total Test Suites:** 4
- **Passed:** 0
- **Failed:** 4
- **Success Rate:** 0.0%

## Test Suite Results


### Character Selection & Navigation
- **Status:** âŒ FAILED
- **Duration:** 1.27s
- **Error:** Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-character-selection.ts"



### Chat Interaction Paths
- **Status:** âŒ FAILED
- **Duration:** 1.35s
- **Error:** Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-chat-interactions.ts"



### System Prompt & Template Testing
- **Status:** âŒ FAILED
- **Duration:** 1.23s
- **Error:** Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-system-prompts.ts"



### Database State Verification
- **Status:** âŒ FAILED
- **Duration:** 1.27s
- **Error:** Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-database-state.ts"



## Detailed Output


### Character Selection & Navigation
```
ğŸš€ Starting Character Selection & Navigation Tests
============================================================

ğŸ§ª Test 1.1: Direct Character Selection
============================================================
âŒ FAILED
Errors: [
  'Character load failed: JSON object requested, multiple (or no) rows returned'
]

ğŸ§ª Test 1.2: Character Selection with Scene
============================================================
âŒ FAILED
Errors: [
  'Scene load failed: JSON object requested, multiple (or no) rows returned'
]

ğŸ§ª Test 1.3: Character Info Drawer
============================================================
âœ… PASSED

============================================================
ğŸ“Š Test Summary
============================================================
âŒ Test 1.1: Direct Character Selection
   - Character load failed: JSON object requested, multiple (or no) rows returned
âŒ Test 1.2: Character Selection with Scene
   - Scene load failed: JSON object requested, multiple (or no) rows returned
âœ… Test 1.3: Character Info Drawer

Total: 3 | Passed: 1 | Failed: 2


Error:
Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-character-selection.ts"

```


### Chat Interaction Paths
```
âœ… Using test user ID: 3348b481-8fb1-4745-8e6c-db6e9847e429
ğŸš€ Starting Chat Interaction Tests
============================================================

ğŸ§ª Test 2.1: Conversation Kickoff
============================================================
âŒ FAILED
Errors: [
  'Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"',
  'Template load failed: JSON object requested, multiple (or no) rows returned'
]

ğŸ§ª Test 2.2: Regular Message Exchange
============================================================

ğŸ§ª Test 2.3: Message with Scene Generation
============================================================

============================================================
ğŸ“Š Test Summary
============================================================
âŒ Test 2.1: Conversation Kickoff
   - Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"
   - Template load failed: JSON object requested, multiple (or no) rows returned
âŒ Test 2.2: Regular Message Exchange
   - Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"
âŒ Test 2.3: Message with Scene Generation
   - Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"

Total: 3 | Passed: 0 | Failed: 3


Error:
Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-chat-interactions.ts"

```


### System Prompt & Template Testing
```
ğŸš€ Starting System Prompt & Template Tests
============================================================

ğŸ§ª Test 3.1: Prompt Template Application
============================================================
âŒ FAILED
Errors: [
  'Character load failed: JSON object requested, multiple (or no) rows returned'
]

ğŸ§ª Test 3.2: Character Data Integration
============================================================
âŒ FAILED
Errors: [
  'Character load failed: JSON object requested, multiple (or no) rows returned'
]

ğŸ§ª Test 3.3: Scene System Prompt Application
============================================================
âŒ FAILED
Errors: [
  'Scene load failed: JSON object requested, multiple (or no) rows returned'
]

============================================================
ğŸ“Š Test Summary
============================================================
âŒ Test 3.1: Prompt Template Application
   - Character load failed: JSON object requested, multiple (or no) rows returned
âŒ Test 3.2: Character Data Integration
   - Character load failed: JSON object requested, multiple (or no) rows returned
âŒ Test 3.3: Scene System Prompt Application
   - Scene load failed: JSON object requested, multiple (or no) rows returned

Total: 3 | Passed: 0 | Failed: 3


Error:
Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-system-prompts.ts"

```


### Database State Verification
```
âœ… Using test user ID: 3348b481-8fb1-4745-8e6c-db6e9847e429
ğŸš€ Starting Database State Verification Tests
============================================================

ğŸ§ª Test 9.1: Conversation Lifecycle
============================================================
âŒ FAILED
Errors: [
  'Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"'
]

ğŸ§ª Test 9.2: Message Persistence
============================================================

ğŸ§ª Test 9.3: Scene Image Storage
============================================================
âŒ FAILED
Errors: [
  'Job creation failed: null value in column "user_id" of relation "jobs" violates not-null constraint'
]

============================================================
ğŸ“Š Test Summary
============================================================
âŒ Test 9.1: Conversation Lifecycle
   - Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"
âŒ Test 9.2: Message Persistence
   - Conversation creation failed: insert or update on table "conversations" violates foreign key constraint "conversations_character_id_fkey"
âŒ Test 9.3: Scene Image Storage
   - Job creation failed: null value in column "user_id" of relation "jobs" violates not-null constraint

Total: 3 | Passed: 0 | Failed: 3


Error:
Command failed: npx tsx "/Users/jonathanhughes/Development/ourvidz/scripts/test-roleplay/test-database-state.ts"

```


## Next Steps


âš ï¸ **Some tests failed. Please review the errors above and:**
1. Check database state
2. Verify test data setup
3. Review edge function logs
4. Check API model configuration

